[![Build Status](https://travis-ci.com/spine-examples/kanban.svg?branch=master)](https://travis-ci.com/spine-examples/kanban) &nbsp;
[![license](https://img.shields.io/badge/license-Apache%20License%202.0-blue.svg?style=flat)](http://www.apache.org/licenses/LICENSE-2.0)

# Spine Kanban board server example

In this example a simple Kanban board is implemented using Spine. 
In Kanban work is visualized by placing work items in separate groups,
each representing task status. Moving a task from one column to another showing progress.
An example is implemented with three columns of tasks—good old "To-Do", "In Progress" and "Done".

## Domain model  

Spine Kanban Bounded Context is composed of 4 entities: two aggregates and two projections. 

The aggregates are the Kanban Board and the Task. 

Kanban Board projection bears same name as an aggregate, and matches its state, while the second is independent Assignees projection.


### Kanban Board aggregate
Kanban board handles `BoardCreated`, `TaskAdded` and `TaskMoved` events.

`BoardCreated` and `TaskMoved` events are emitted when handling the corresponding commands
(`CreateBoard` and `MoveTask`), while `TaskAdded` is a emitted as a reaction to Task aggregate `TaskCreated` event. 

### Task aggregate
Task aggregate consumes 6 types of commands: 

- `TaskCreated` and `TaskAssigned` – upon handling a `CreateTask` command. 

    `TaskAssigned` event is emitted only when a task is created with a user assigned.
 
- `WorkStarted`, `WorkSuspended`, `TaskDone` and `TaskReopened` – as a reaction to board `TaskMoved` event.
    - `WorkStarted` — task moved from "To-Do" to "In Progress"
    - `WorkSuspended` – task moved from "In Progress" to "To-Do" 
    - `TaskDone` – task moved to "Done" column
    - `TaskReopened` – task moved from "Done" to some other column 

### Kanban Board Projection
Handles the same events Kanban Board Aggregate does building the same state for reading.
Can be queried by `KanbanBoard` entity type.

### Assignees Projection
Assignees projection lists the users assigned to tasks on the board. 
It does that by subscribing to the `TaskAssigned` events emitted by Task aggregate.

Can be queried by `BoardAssignees` entity type.


## Distribution

Two artifacts: `kanban-board-server` and `kanban-board-proto` are generated by this example. 
They are published to TeamDevs Maven repo under `io.spine.examples.kanban-board`. 
The server artifact can be executed to start the Kanban server locally, while the proto 
artifact contains all of the application definitions.

## Running

The `kanban-board-server` JAR can be executed by java:
```sh
java -Dport=50051 -jar kanban-board-0.10.49-SNAPSHOT-server.jar
```

This starts a command and a query gRPC services on the specified port. 
